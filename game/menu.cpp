/**
 * This class describes Menu behavior.
 *
 * Copyright 2015 Your Name <you@yourhost.com>
 */

#include <fstream>
#include <sstream>

#include "menu.h"

MyMenu::MyMenu() : Scene()
{
	canvas = new Canvas(6);
	this->addChild(canvas);
	setupPlayer();
	canvas->drawSprite(player);
}


MyMenu::~MyMenu()
{
	this->removeChild(canvas);
	delete canvas;

	player.pixels.clear();
}

void MyMenu::update(float deltaTime)
{
	// ###############################################################
	// Escape key stops the Scene
	// ###############################################################
	if (input()->getKeyUp(KeyCode::Enter)) {
		this->stop();
	}
}

void MyMenu::setupPlayer()
{
	char playerSprite[384] = { // 24*16
		0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 2,	2, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 2,	2, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 2, 2,	2, 2, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 2, 2,	2, 2, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	1, 1, 2, 2,	2, 2, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 1, 1,	1, 1, 1, 1,	1, 1, 1, 2,	2, 1, 1, 1,	1, 1, 1, 1,	1, 1, 0, 0,
		0, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 0,
		4, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 1,	1, 1, 1, 4,
		0, 0, 0, 0,	0, 0, 0, 0,	1, 1, 1, 1,	1, 1, 1, 1,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 1,	1, 1, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 1, 1, 1,	1, 1, 1, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 1, 1,	1, 1, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,
		0, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 1,	1, 0, 0, 0,	0, 0, 0, 0,	0, 0, 0, 0,
	};

	player.init(playerSprite, 24, 16);
	player.position = Pointi(canvas->width() / 2, 8);
}
